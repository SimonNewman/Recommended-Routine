{"version":3,"sources":["Exercise.js","Log.js","Progression.js","Routine.js","Workout.js","app.js"],"names":["Exercise","exercise","id","name","type","weight","reps","lastSets","workoutHistory","find","workout","view","$","html","displayScreen","calculateNextSets","sets","minReps","maxReps","promotion","nextSets","nextReps","reduce","a","b","i","push","averageReps","Math","floor","leftOverReps","getExercise","exercises","viewExercise","viewExercises","forEach","Log","Progression","progression","getProgression","progressions","viewProgression","viewProgressions","Routine","routine","console","log","getProgressions","progressionIds","Set","getNextWorkout","nextWorkout","Workout","getRoutine","routines","viewRoutine","viewRoutines","routineId","getLastWorkout","workouts","filter","length","slice","lastWorkout","currentScreen","exerciseNumber","seconds","currentExercise","setsCompleted","rest","doneSound","Audio","loop","defaultTimer","defaultReps","db","PouchDB","aWorkout","_id","Date","toISOString","completed","allDocs","include_docs","descending","err","doc","rows","showData","JSON","stringify","localStorage","deleteData","r","confirm","clear","slugify","string","p","RegExp","split","join","toString","toLowerCase","replace","c","charAt","indexOf","ajax","cache","dataType","url","success","result","exerciseData","error","progressionData","routineData","screen","hide","show","css"],"mappings":"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","file":"routine.js","sourcesContent":["function Exercise(exercise) {\r\n  this.id = exercise.id;\r\n  this.name = exercise.name;\r\n  this.type = exercise.type;\r\n  this.weight = exercise.weight;\r\n  this.reps = exercise.reps;\r\n\r\n  /*\r\n  this.getHistory = function() {\r\n    return workoutHistory.reps.filter(workout => workout.exercise === this.id);\r\n  };\r\n  */\r\n\r\n  this.lastSets = function() {\r\n    let lastSets = workoutHistory.reps.find(workout => workout.exercise === this.id);\r\n    if (lastSets) {\r\n      return lastSets;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  this.view = function() {\r\n    $('.screen.exercise #exercise-title').html(this.name);\r\n    let html = `\r\n      <p>Type: ${exercise.type}<br>\r\n      Reps: ${exercise.reps}</p>\r\n    `;\r\n    $('.screen.exercise .content').html(html);\r\n    /*\r\n    html = '';\r\n    this.getHistory().forEach(sets => {\r\n      html += sets.reps;\r\n    });\r\n    $('.screen.exercise .list').html(html);\r\n    */\r\n    displayScreen('exercise');\r\n  };\r\n\r\n  this.calculateNextSets = function(sets, minReps, maxReps) {\r\n    let promotion = false;\r\n    let nextSets = [];\r\n    let nextReps = 0;\r\n    if (this.lastSets()) {\r\n      nextReps = this.lastSets().reps.reduce((a, b) => a + b, 0) + 1;\r\n    } else {\r\n      for (let i = 0; i < sets; i++) {\r\n        nextSets.push(minReps);\r\n      }\r\n      return {\r\n        promotion: promotion,\r\n        nextSets: nextSets\r\n      };\r\n    }\r\n\r\n    if (nextReps > sets * maxReps) {\r\n      promotion = true;\r\n    }\r\n\r\n    let averageReps = Math.floor(nextReps / sets);\r\n    let leftOverReps = nextReps - (sets * averageReps);\r\n    for (let i = 0; i < sets; i++) {\r\n      nextSets.push(averageReps);\r\n    }\r\n    for (let i = 0; i < leftOverReps; i++) {\r\n      nextSets[i] = nextSets[i] + 1;\r\n    }\r\n\r\n    return {\r\n      promotion: promotion,\r\n      nextSets: nextSets\r\n    };\r\n  };\r\n}\r\n\r\n// Get exercise\r\nfunction getExercise(id) {\r\n  return exercises.find(exercise => exercise.id === id);\r\n}\r\n\r\n// View exercise\r\nfunction viewExercise(id) {\r\n  let exercise = getExercise(id);\r\n  exercise.view();\r\n}\r\n\r\n// View all exercises\r\nfunction viewExercises() {\r\n  let html = '';\r\n  exercises.forEach((exercise) => {\r\n    html += `<li onclick=\"viewExercise(${exercise.id})\">${exercise.name}</li>`;\r\n  });\r\n  $('.screen.exercises .list').html(html);\r\n  displayScreen('exercises');\r\n}\r\n","function Log() {\r\n\r\n}","function Progression(progression) {\r\n  this.id = progression.id;\r\n  this.name = progression.name;\r\n  this.exercises = [];\r\n\r\n  progression.exercises.forEach(id => {\r\n    this.exercises.push(getExercise(id));\r\n  });\r\n\r\n  this.view = function() {\r\n    $('.screen.progression #progression-title').html(this.name);\r\n    let html = '';\r\n    this.exercises.forEach((exercise) => {\r\n      html += `<li onclick=\"viewExercise(${exercise.id})\">${exercise.name}</li>`;\r\n    });\r\n    $('.screen.progression .list').html(html);\r\n    displayScreen('progression');\r\n  };\r\n}\r\n\r\n// Get progression\r\nfunction getProgression(id) {\r\n  return progressions.find(progression => progression.id === id);\r\n}\r\n\r\n// View progression\r\nfunction viewProgression(id) {\r\n  let progression = getProgression(id);\r\n  progression.view();\r\n}\r\n\r\n// View all progressions\r\nfunction viewProgressions() {\r\n  let html = '';\r\n  progressions.forEach((progression) => {\r\n    html += `<li onclick=\"viewProgression(${progression.id})\">${progression.name}</li>`;\r\n  });\r\n  $('.screen.progressions .list').html(html);\r\n  displayScreen('progressions');\r\n}","function Routine(routine) {\r\n  this.id = routine.id;\r\n  this.name = routine.name;\r\n  this.minReps = routine.minReps;\r\n  this.maxReps = routine.maxReps;\r\n  this.routine = [];\r\n  this.progressions = [];\r\n\r\n  routine.routine.forEach(progression => {\r\n    this.routine.push(getProgression(progression));\r\n  });\r\n\r\n  this.view = function() {\r\n    let html = '';\r\n    $('.screen.routine #routine-title').html(this.name);\r\n    console.log(this.routine);\r\n    $('.screen.routine .list').html(html);\r\n    displayScreen('routine');\r\n  };\r\n\r\n  this.getProgressions = function() {\r\n    let routine = [];\r\n    let progressionIds = [ ...new Set(routine.routine)];\r\n    progressionIds.forEach(id => {\r\n      routine.push(getProgression(id));\r\n    });\r\n  };\r\n\r\n  this.getNextWorkout = function() {\r\n    let nextWorkout = new Workout(this.id).getNextWorkout();\r\n    return nextWorkout;\r\n  };\r\n}\r\n\r\n// Get routine\r\nfunction getRoutine(id) {\r\n  return routines.find(routine => routine.id === id);\r\n}\r\n\r\n// View routine\r\nfunction viewRoutine(id) {\r\n  let routine = getRoutine(id);\r\n  routine.view();\r\n  console.log(routine.getNextWorkout());\r\n}\r\n\r\n// View all routines\r\nfunction viewRoutines() {\r\n  let html = '';\r\n  routines.forEach((routine) => {\r\n    html += `<li onclick=\"viewRoutine(${routine.id})\">${routine.name}</li>`;\r\n  });\r\n  $('.screen.routines .list').html(html);\r\n  displayScreen('routines');\r\n}\r\n","function Workout(routineId) {\r\n  let routine = getRoutine(routineId);\r\n\r\n  this.id = routine.id;\r\n  this.name = routine.name;\r\n\r\n  this.getLastWorkout = function() {\r\n    let workouts = workoutHistory.workouts.filter(workout => workout.id === this.id);\r\n    if (workouts.length) {\r\n      return workouts.slice(-1)[0];\r\n    }\r\n  };\r\n\r\n  this.getNextWorkout = function() {\r\n    let lastWorkout = this.getLastWorkout();\r\n    return lastWorkout;\r\n  };\r\n}","let currentScreen = 'welcome';\r\n//let currentScreen = 'bodyline';\r\n//let currentScreen = 'strength';\r\nlet exerciseNumber,\r\n    seconds,\r\n    currentExercise,\r\n    setsCompleted = [],\r\n    //rest = 90,\r\n    rest = 1;\r\n\r\n// Sound\r\nconst doneSound = new Audio('sound/243020__plasterbrain__game-start.ogg');\r\ndoneSound.loop = false;\r\n\r\n//const defaultTimer = 10;\r\nconst defaultTimer = 1;\r\nconst defaultReps = 5;\r\n\r\nlet db = new PouchDB('workoutLog');\r\nlet aWorkout = {\r\n  _id: new Date().toISOString(),\r\n  exercises: [\r\n    {\r\n      id: 3,\r\n      reps: [7,6,5]\r\n    },\r\n    {\r\n      id: 8,\r\n      reps: [5,5,5]\r\n    },\r\n  ],\r\n  completed: true\r\n};\r\n/*\r\ndb.put(aWorkout, function callback(err, result) {\r\n  if (!err) {\r\n    console.log('Successfully posted a workout!');\r\n  }\r\n});\r\n*/\r\ndb.allDocs({include_docs: true, descending: true}, function(err, doc) {\r\n  console.log(doc.rows);\r\n});\r\n\r\nfunction showData() {\r\n  $('.data').html(JSON.stringify(localStorage));\r\n}\r\n\r\nfunction deleteData() {\r\n  let r = confirm(\"Are you sure you want to delete all data?\");\r\n  if (r) {\r\n    localStorage.clear();\r\n  }\r\n}\r\n\r\nfunction slugify(string) {\r\n  const a = 'àáäâãåăæçèéëêǵḧìíïîḿńǹñòóöôœøṕŕßśșțùúüûǘẃẍÿź·/_,:;'\r\n  const b = 'aaaaaaaaceeeeghiiiimnnnooooooprssstuuuuuwxyz------'\r\n  const p = new RegExp(a.split('').join('|'), 'g')\r\n\r\n  return string.toString().toLowerCase()\r\n    .replace(/\\s+/g, '-') // Replace spaces with -\r\n    .replace(p, c => b.charAt(a.indexOf(c))) // Replace special characters\r\n    .replace(/&/g, '-and-') // Replace & with 'and'\r\n    .replace(/[^\\w\\-]+/g, '') // Remove all non-word characters\r\n    .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\r\n    .replace(/^-+/, '') // Trim - from start of text\r\n    .replace(/-+$/, '') // Trim - from end of text\r\n}\r\n\r\n// Get Exercises\r\nlet exercises = [];\r\n$.ajax({\r\n  type: 'GET',\r\n  cache: true,\r\n  dataType: 'json',\r\n  url: 'data/exercises.json',\r\n  success: function(result) {\r\n    result.forEach((exerciseData) => {\r\n      let exercise = new Exercise(exerciseData);\r\n      exercises.push(exercise);\r\n    });\r\n  },\r\n  error: function() {\r\n\r\n  }\r\n});\r\n\r\n// Get Progressions\r\nlet progressions = [];\r\n$.ajax({\r\n  type: 'GET',\r\n  cache: true,\r\n  dataType: 'json',\r\n  url: 'data/progressions.json',\r\n  success: function(result) {\r\n    result.forEach((progressionData) => {\r\n      let progression = new Progression(progressionData);\r\n      progressions.push(progression);\r\n    });\r\n    console.log(progressions);\r\n  },\r\n  error: function() {\r\n\r\n  }\r\n});\r\n\r\n// Get Routines\r\nlet routines = [];\r\n$.ajax({\r\n  type: 'GET',\r\n  cache: true,\r\n  dataType: 'json',\r\n  url: 'data/routines.json',\r\n  success: function(result) {\r\n    result.forEach((routineData) => {\r\n      let routine = new Routine(routineData);\r\n      routines.push(routine);\r\n    });\r\n  },\r\n  error: function() {\r\n\r\n  }\r\n});\r\n\r\n// Get History\r\n// TODO\r\n/*\r\nlet workoutHistory = [];\r\n$.ajax({\r\n  type: 'GET',\r\n  cache: false,\r\n  dataType: 'json',\r\n  url: 'data/history.json',\r\n  success: (result) => {\r\n    workoutHistory = result;\r\n  },\r\n  error: (error) => {\r\n\r\n  }\r\n});\r\n*/\r\n\r\n// Display screen\r\nfunction displayScreen(screen) {\r\n  $('.screen:not(.' + screen + ')').hide();\r\n  $('.screen.' + screen).show().css('display', 'flex');\r\n  currentScreen = screen;\r\n}\r\n\r\ndisplayScreen(currentScreen);\r\n"]}