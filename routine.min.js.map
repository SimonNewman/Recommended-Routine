{"version":3,"sources":["script.js"],"names":["data","currentScreen","exerciseNumber","seconds","doneSound","Audio","loop","currentExercise","defaultTimer","apiUrl","bodyline","id","name","displayScreen","screen","$","hide","show","css","setupScreen","setupBodylineExercise","i","length","html","getLastSet","removeClass","addClass","saveExercise","exercise","timeReps","completed","newData","exerciseData","date","Date","getTime","savedData","JSON","parse","localStorage","getItem","push","setItem","stringify","click","currentTimer","this","next","parseInt","prev","secondsLeft","timer","setInterval","play","clearInterval"],"mappings":"aAAA,IAAAA,KAAA,KAEAC,cAAA,WACAC,oBAAAA,EACAC,aAAAA,EACAC,UAAA,IAAAC,MAAA,8CACAD,UAAAE,MAAA,EAEA,IAAAC,qBAAAA,EACAC,aAAA,GACAC,OAAA,4FACAC,SAAA,CACA,CACAC,GAAA,QACAC,KAAA,SAEA,CACAD,GAAA,kBACAC,KAAA,mBAEA,CACAD,GAAA,mBACAC,KAAA,oBAEA,CACAD,GAAA,gBACAC,KAAA,iBAEA,CACAD,GAAA,cACAC,KAAA,eAEA,CACAD,GAAA,YACAC,KAAA,cAMA,SAAAC,cAAAC,GACAC,EAAA,gBAAAD,EAAA,KAAAE,OACAD,EAAA,WAAAD,GAAAG,OAAAC,IAAA,UAAA,QAEAC,YADAlB,cAAAa,GAIA,SAAAK,YAAAL,GACA,aAAAA,GACAM,wBAIA,SAAAA,sBAAAC,GACAA,IAAAA,EAAA,IACAnB,eAAAmB,GACAX,SAAAY,SAEAP,EAAA,kBAAAQ,KAAAb,SAAAW,GAAAT,MACAL,gBAAAG,SAAAW,GAAAV,GACAa,WAAAd,SAAAW,GAAAV,IACAI,EAAA,gBAAAQ,KAAAC,WAAAd,SAAAW,GAAAV,KAEAI,EAAA,gBAAAQ,KAAAf,cAEAO,EAAA,aAAAC,OACAD,EAAA,gCAAAC,OACAD,EAAA,sEAAAE,OACAF,EAAA,wBAAAU,YAAA,QACAV,EAAA,uBAAAW,SAAA,SAMA,SAAAC,aAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAA,GACAC,EAAA,CACAC,MAAA,IAAAC,MAAAC,UACAN,SAAAA,EACAC,UAAAA,GAEAM,EAAAC,KAAAC,MAAAC,aAAAC,QAAAZ,IACA,OAAAQ,GACAL,EAAAK,GACAK,KAAAT,GAEAD,EAAAU,KAAAT,GAEAO,aAAAG,QAAAd,EAAAS,KAAAM,UAAAZ,IAGA,SAAAP,WAAAI,GACA,IAAAQ,EAAAC,KAAAC,MAAAC,aAAAC,QAAAZ,IACA,OAAA,OAAAQ,GACAA,EAAAA,EAAAd,OAAA,GAAAO,SAzDAhB,cAAAZ,eA+DAc,EAAA,eAAA6B,MAAA,WACA,IAAAC,EAAA9B,EAAA+B,MAAAC,KAAA,gBAAAxB,OACA,EAAAsB,GACA9B,EAAA+B,MAAAC,KAAA,gBAAAxB,KAAAyB,SAAAH,GAAA,KAIA9B,EAAA,aAAA6B,MAAA,WACA,IAAAC,EAAA9B,EAAA+B,MAAAG,KAAA,gBAAA1B,OACAR,EAAA+B,MAAAG,KAAA,gBAAA1B,KAAAyB,SAAAH,GAAA,KAGA9B,EAAA,uBAAA6B,MAAA,WACA7B,EAAA+B,MAAArB,YAAA,QACAV,EAAA,8CAAAC,OAEA,IAAAkC,EADA/C,QAAA6C,SAAAjC,EAAA,0BAAAQ,QAEA4B,EAAAC,YAAA,WACA,EAAAF,GACAA,IACAnC,EAAA,0BAAAQ,KAAA2B,KAEAnC,EAAA,gCAAAE,OACAF,EAAA,wBAAAW,SAAA,QACAtB,UAAAiD,OACAtC,EAAA,0BAAAC,OACAD,EAAA,uBAAAE,OACAqC,cAAAH,KAGA,OAGApC,EAAA,sBAAA6B,MAAA,WACAjB,aAAApB,gBAAAJ,SAAA,GACAiB,wBAAAlB,kBAGAa,EAAA,qBAAA6B,MAAA,WACAjB,aAAApB,gBAAAJ,SAAA,GACAiB,wBAAAlB","file":"routine.min.js","sourcesContent":["let data = null;\r\n//let currentScreen = 'welcome';\r\nlet currentScreen = 'bodyline';\r\nlet exerciseNumber,\r\n    seconds;\r\nlet doneSound = new Audio('sound/243020__plasterbrain__game-start.ogg');\r\ndoneSound.loop = false;\r\n\r\nlet currentExercise;\r\nconst defaultTimer = 10;\r\nconst apiUrl = 'https://www.jsonstore.io/9d567715b95df4d04c185c008ad8699c3e362940430a2ca7494aaefad073403e';\r\nconst bodyline = [\r\n  {\r\n    id: 'plank',\r\n    name: 'Plank'\r\n  },\r\n  {\r\n    id: 'side-plank-left',\r\n    name: 'Side Plank Left'\r\n  },\r\n  {\r\n    id: 'side-plank-right',\r\n    name: 'Side Plank Right'\r\n  },\r\n  {\r\n    id: 'reverse-plank',\r\n    name: 'Reverse Plank'\r\n  },\r\n  {\r\n    id: 'hollow-hold',\r\n    name: 'Hollow Hold'\r\n  },\r\n  {\r\n    id: 'arch-hold',\r\n    name: 'Arch Hold'\r\n  }\r\n];\r\n\r\ndisplayScreen(currentScreen);\r\n\r\nfunction displayScreen(screen) {\r\n  $('.screen:not(.' + screen + ')').hide();\r\n  $('.screen.' + screen).show().css('display', 'flex');\r\n  currentScreen = screen;\r\n  setupScreen(screen);\r\n}\r\n\r\nfunction setupScreen(screen) {\r\n  if (screen === 'bodyline') {\r\n    setupBodylineExercise();\r\n  }\r\n}\r\n\r\nfunction setupBodylineExercise(i) {\r\n  if (!i) i = 0;\r\n  exerciseNumber = i;\r\n  let count = bodyline.length;\r\n  if (i < count) {\r\n    $('.exercise-name').html(bodyline[i].name);\r\n    currentExercise = bodyline[i].id;\r\n    if (getLastSet(bodyline[i].id)) {\r\n      $('.timer-value').html(getLastSet(bodyline[i].id));\r\n    } else {\r\n      $('.timer-value').html(defaultTimer);\r\n    }\r\n    $('.times-up').hide();\r\n    $('.bodyline .completed-message').hide();\r\n    $('.bodyline .timer-up, .bodyline .timer-down, .bodyline .timer-value').show();\r\n    $('.bodyline .completed').removeClass('show');\r\n    $('.bodyline .next-btn').addClass('show');\r\n  } else {\r\n    setupScreen\r\n  }\r\n}\r\n\r\nfunction saveExercise(exercise, timeReps, completed) {\r\n  let newData = [];\r\n  let exerciseData = {\r\n    date: new Date().getTime(),\r\n    timeReps: timeReps,\r\n    completed: completed\r\n  };\r\n  let savedData = JSON.parse(localStorage.getItem(exercise));\r\n  if (savedData !== null) {\r\n    newData = savedData;\r\n    newData.push(exerciseData);\r\n  } else {\r\n    newData.push(exerciseData);\r\n  }\r\n  localStorage.setItem(exercise, JSON.stringify(newData));\r\n}\r\n\r\nfunction getLastSet(exercise) {\r\n  let savedData = JSON.parse(localStorage.getItem(exercise));\r\n  if (savedData !== null) {\r\n    return savedData[savedData.length -1].timeReps;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\n$('.timer-down').click(function(){\r\n  let currentTimer = $(this).next('.timer-value').html();\r\n  if (currentTimer > 0) {\r\n    $(this).next('.timer-value').html(parseInt(currentTimer) - 1);\r\n  }\r\n});\r\n\r\n$('.timer-up').click(function(){\r\n  let currentTimer = $(this).prev('.timer-value').html();\r\n  $(this).prev('.timer-value').html(parseInt(currentTimer) + 1);\r\n});\r\n\r\n$('.bodyline .next-btn').click(function(){\r\n  $(this).removeClass('show');\r\n  $('.bodyline .timer-up, .bodyline .timer-down').hide();\r\n  seconds = parseInt($('.bodyline .timer-value').html());\r\n  let secondsLeft = seconds;\r\n  let timer = setInterval(function(){\r\n    if (secondsLeft > 1) {\r\n      secondsLeft--;\r\n      $('.bodyline .timer-value').html(secondsLeft);\r\n    } else {\r\n      $('.bodyline .completed-message').show();\r\n      $('.bodyline .completed').addClass('show');\r\n      doneSound.play();\r\n      $('.bodyline .timer-value').hide();\r\n      $('.bodyline .times-up').show();\r\n      clearInterval(timer);\r\n    }\r\n  },\r\n  1000);\r\n});\r\n\r\n$('.bodyline .yes-btn').click(function(){\r\n  saveExercise(currentExercise, seconds, true);\r\n  setupBodylineExercise(++exerciseNumber);\r\n});\r\n\r\n$('.bodyline .no-btn').click(function(){\r\n  saveExercise(currentExercise, seconds, false);\r\n  setupBodylineExercise(++exerciseNumber);\r\n});\r\n"]}